1. Заходим на сервер.
2. Переключаемся на пользователя root командой sudo su
3. Пункты 3, 4, 5, 6 делать не обязательно.
4. Если у вас не отображается кириллица, для удобства, проверяем и включаем нужные локализации.
5. Вводим sudo dpkg-reconfigure locales
6. Выбираем (пробелом) все локализации en_US (3шт) и ru_RU (4шт.). Жмем ОК.
7. По умолчанию, оставляем en_US.
8. Если команда wget не установлена на вашем сервере, выполняем команду sudo apt install wget
9. Выполняем команду wget https://raw.githubusercontent.com/ogermw/GUI-for-Ubuntu/master/setup_vnc.sh && chmod +x setup_vnc.sh && ./setup_vnc.sh
10. Вам будет предоставлено меню выбора вариантов установки. Полностью автоматический режим со стандартным паролем или ручная установка, с возможностью сразу ввести свой пароль. Так же, на ваш сервер будет установлена последняя версия браузера Google Chrome. Если выбрали полностью автоматическую установку, тор пароль для пользователя vnc и пароль для подключения сеанса VNC - 172029.
11. Если во время выполнения скрипта, у вас все таки система будет выдавать сообщение о необходимости перезапуска некоторых компонентов, то нужно выбирать цифру, соответствующую значению NONE (никакие) или (в зависимости от вашей виртуализации), выбрать Cancel (Tab и стрелка вправо) и нажать Enter.
12. Чтобы изменить пароли, созданные во время установки, вводим в терминале команды:
13. vncpasswd - вводим старый пароль (из п.10) и меняем пароль для подключения сеанса VNC (выполнять ТОЛЬКО!!! под пользователем vnc, чтобы перейти на пользователя vnc, вводим su - vnc)
14. passwd vnc - вводим старый пароль (из п.10) и меняем пароль для пользователя vnc (можно выполнять под любым пользователем)
15. После установки, настоятельно рекомендуется добавить исключения в ваши Iptables, чтобы боты, атакующие ваш сервер, не уводили ваш рабочий стол в режим блокировки.
16. Вписываем команды:
17. iptables -I INPUT -p tcp -s ваш_ip_adress --dport 5901 -j ACCEPT  (заходим на 2ip.ru, смотрим свой адрес, меняем в строке на ваш)
18. iptables -A INPUT -p tcp -s 0.0.0.0/0 --dport 5901 -j DROP  (тут ничего не меняем, вводим прямо так, эта команда блокирует подключения со всех IP, кроме вашего)
19. Чтобы правила, внесенные в Iptables, сохранялись после перезагрузки сервера, введите команду sudo apt-get install iptables-persistent -y , на запрос сохранить ли внесенные в Iptables изменения для IpV4 и IpV6, нажмите Yes (для каждого запроса).
